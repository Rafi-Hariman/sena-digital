<div class="dashboard-container">
  <!-- Overlay for mobile -->
  <div class="sidebar-overlay"
       [class.active]="isSidebarOpen"
       (click)="closeSidebar()"
       [@sidebarSlide]="isSidebarOpen ? 'open' : 'closed'"></div>

  <!-- Enhanced Toggle Button for Mobile -->
  <button class="menu-toggle"
          (click)="toggleSidebar()"
          [class.active]="isSidebarOpen"
          aria-label="Toggle sidebar menu">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <!-- Sidebar with Animation -->
  <div class="sidebar"
       [class.open]="isSidebarOpen">

    <!-- Logo Section -->
    <div class="logo-section">
      <div class="logo-container">
        <img src="assets/logos.png" alt="Horuzt Digital Invitation Logo" />
        <div class="logo-text">
          <h1>Horuzt</h1>
          <h2>Invitation</h2>
        </div>
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="navigation-menu" role="navigation" aria-label="Main navigation">
      <!-- Dashboard -->
      <div class="menu-section">
        <a class="menu-item"
           routerLink="overview"
           routerLinkActive="active"
           (click)="onMenuItemClick()"
           tabindex="0">
          <i class="fas fa-th-large" aria-hidden="true"></i>
          <span>Dashboard</span>
        </a>
      </div>

      <!-- Divider -->
      <div class="menu-divider"></div>

      <!-- FITUR Section Header -->
      <div class="menu-section">
        <div class="section-header">
          <span>FITUR</span>
        </div>
      </div>

      <!-- Website with Dropdown -->
      <div class="menu-section">
        <div class="menu-item dropdown-toggle"
             [class.active]="isActiveRoute('website')"
             (click)="toggleWebsiteSubmenu()"
             tabindex="0"
             role="button"
             [attr.aria-expanded]="isWebsiteSubmenuOpen"
             aria-label="Website menu">
          <div class="menu-item-content">
            <i class="fas fa-globe" aria-hidden="true"></i>
            <span>Website</span>
          </div>
          <i class="fas fa-chevron-right dropdown-icon"
             [class.rotated]="isWebsiteSubmenuOpen"
             aria-hidden="true"></i>
        </div>

        <!-- Website Submenu with Animation -->
        <div class="submenu"
             [@submenuExpand]="isWebsiteSubmenuOpen ? 'expanded' : 'collapsed'">
          <a class="submenu-item"
             routerLink="website/tampilan"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Tampilan</span>
          </a>
          <a class="submenu-item"
             routerLink="website/pengaturan"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Pengaturan</span>
          </a>
          <a class="submenu-item"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Data Website</span>
          </a>
          <a class="submenu-item"
             routerLink="website/mempelai"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Mempelai</span>
          </a>
          <a class="submenu-item"
             routerLink="website/acara"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Acara</span>
          </a>
          <a class="submenu-item"
             routerLink="website/gallery"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Gallery</span>
          </a>
          <a class="submenu-item"
             routerLink="website/cerita-quote"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Cerita & Quote</span>
          </a>
          <a class="submenu-item"
             routerLink="website/rekening"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Rekening</span>
          </a>
        </div>
      </div>

      <!-- Pengunjung with Dropdown -->
      <div class="menu-section">
        <div class="menu-item dropdown-toggle"
             [class.active]="isActiveRoute('pengunjung')"
             (click)="togglePengunjungSubmenu()"
             tabindex="0"
             role="button"
             [attr.aria-expanded]="isPengunjungSubmenuOpen"
             aria-label="Pengunjung menu">
          <div class="menu-item-content">
            <i class="fas fa-chart-line" aria-hidden="true"></i>
            <span>Pengunjung</span>
          </div>
          <i class="fas fa-chevron-right dropdown-icon"
             [class.rotated]="isPengunjungSubmenuOpen"
             aria-hidden="true"></i>
        </div>

        <!-- Pengunjung Submenu with Animation -->
        <div class="submenu"
             [@submenuExpand]="isPengunjungSubmenuOpen ? 'expanded' : 'collapsed'">
          <a class="submenu-item"
             routerLink="pengunjung/ucapan"
             routerLinkActive="active"
             (click)="onMenuItemClick()"
             tabindex="0">
            <span>Riwayat & Ucapan</span>
          </a>
        </div>
      </div>

      <!-- Testimoni -->
      <div class="menu-section">
        <a class="menu-item"
           routerLink="testimoni"
           routerLinkActive="active"
           (click)="onMenuItemClick()"
           tabindex="0">
          <i class="fas fa-comments" aria-hidden="true"></i>
          <span>Testimoni</span>
        </a>
      </div>

      <!-- Divider -->
      <div class="menu-divider"></div>

      <!-- BANTUAN Section Header -->
      <div class="menu-section">
        <div class="section-header">
          <span>BANTUAN</span>
        </div>
      </div>

      <!-- Hubungi Kami -->
      <div class="menu-section">
        <a class="menu-item"
           routerLink="hubungi-kami"
           routerLinkActive="active"
           (click)="onMenuItemClick()"
           tabindex="0">
          <i class="fas fa-phone" aria-hidden="true"></i>
          <span>Hubungi Kami</span>
        </a>
      </div>

      <!-- Bottom Divider -->
      <div class="menu-divider"></div>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="content">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="breadcrumbs">
        <h1 class="route-name">{{ currentRouteName }}</h1>
        <span class="route-path">{{ routePath }}</span>
      </div>

      <!-- User Profile Section -->
      <div class="user-profile" (click)="toggleDropdown($event)" tabindex="0" role="button">
        <img class="user-avatar"
             [src]="getProfilePhotoUrl()"
             [alt]="getUserDisplayName() + ' Avatar'"
             onerror="this.src='assets/logos.png'" />
        <span class="user-name">{{ getUserDisplayName() }}</span>
        <i class="fas fa-caret-down" aria-hidden="true"></i>

        <!-- Dropdown Menu -->
        <div class="dropdown-menu" *ngIf="isDropdownOpen" role="menu">
          <a class="dropdown-item"
             (click)="onClickBill()"
             role="menuitem"
             tabindex="0">Bill</a>
          <a class="dropdown-item"
             (click)="selectMenu()"
             role="menuitem"
             tabindex="0">Profile</a>
          <a class="dropdown-item"
             (click)="logout()"
             role="menuitem"
             tabindex="0">Logout</a>
        </div>
      </div>
    </header>

    <!-- Content Area -->
    <main class="well" role="main">
      <router-outlet></router-outlet>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <p>Copyright &#64; Horuzt Invitation {{ getCurrentYear() }}</p>
    </footer>
  </div>
</div>

<!-- Toast Notifications -->
<wc-toast></wc-toast>
